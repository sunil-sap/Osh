<?xml version="1.0" encoding="UTF-8"?>
<!-- [y] hybris Platform Copyright (c) 2000-2012 hybris AG All rights reserved. This software is the confidential and proprietary information 
	of hybris ("Confidential Information"). You shall not disclose such Confidential Information and shall use it only in accordance with 
	the terms of the license agreement you entered into with hybris. -->

<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

	<!-- Facades -->
	<alias alias="simpleSuggestionFacade" name="defaultSimpleSuggestionFacade" />
	<bean id="defaultSimpleSuggestionFacade" class="com.hybris.osh.facades.suggestion.impl.DefaultSimpleSuggestionFacade" scope="tenant">
		<property name="simpleSuggestionService" ref="simpleSuggestionService" />
		<property name="userService" ref="userService" />
		<property name="categoryService" ref="categoryService" />
		<property name="productPricePopulator" ref="productPricePopulator" />
		<property name="productPrimaryImagePopulator" ref="productPrimaryImagePopulator" />
		<property name="productConverter" ref="productConverter" />
	</bean>

	<alias name="acceleratorVariantOptionDataConverter" alias="variantOptionDataConverter" />
	<bean id="acceleratorVariantOptionDataConverter" class="com.hybris.osh.facades.converters.AcceleratorVariantOptionDataConverter"
		parent="defaultVariantOptionDataConverter" scope="tenant">
		<property name="mediaService" ref="mediaService" />
		<property name="mediaContainerService" ref="mediaContainerService" />
		<property name="typeService" ref="typeService" />
		<property name="imageFormatMapping" ref="imageFormatMapping" />
		<property name="variantAttributeMapping">
			<map>
				<entry key="ApparelStyleVariantProduct.style" value="styleSwatch" />
			</map>
		</property>
	</bean>

	<alias name="oshVoucherFacade" alias="voucherFacade"/>
	<bean id="oshVoucherFacade" class="com.hybris.osh.facades.voucher.impl.OshVoucherFacade" scope="tenant"></bean>
	
	<alias name="oshSearchQueryEncoder" alias="solrSearchQueryEncoder"/>
	<bean id="oshSearchQueryEncoder" class="com.hybris.osh.facades.converters.OshSearchQueryEncoder"/>
	
	
	<alias name="acceleratorGenderConverter" alias="genderConverter" />
	<bean id="acceleratorGenderConverter" class="com.hybris.osh.facades.converters.GenderConverter" scope="tenant">
		<property name="typeService" ref="typeService" />
	</bean>


	<!-- accelerator Image Format Mappings -->
	<alias name="acceleratorImageFormatMapping" alias="imageFormatMapping" />
	<bean id="acceleratorImageFormatMapping" parent="defaultImageFormatMapping">
		<property name="mapping">
			<map>
				<entry key="superZoom" value="1200Wx1200H" />
				<entry key="zoom" value="515Wx515H" />
				<entry key="store" value="365Wx246H" />
				<entry key="product" value="300Wx300H" />
				<entry key="thumbnail" value="96Wx96H" />
				<entry key="cartIcon" value="65Wx65H" />
				<entry key="styleSwatch" value="30Wx30H" />
				<entry key="miniCart" value="50x50" />
				<entry key="cartPage" value="92x92" />
				<entry key="productDetail" value="300x300" />
				<entry key="largeView" value="515x515" />
				<entry key="category" value="150Wx150H" />
				<entry key="navigation" value="175x175" />
				<entry key="quickView" value="250x250" />
			</map>
		</property>
	</bean>

	<alias name="acceleratorProductPrimaryImagePopulator" alias="productPrimaryImagePopulator" />
	<bean id="acceleratorProductPrimaryImagePopulator" parent="defaultProductPrimaryImagePopulator">
		<property name="imageFormats">
			<list>
				<value>thumbnail</value>
				<value>miniCart</value>
				<value>cartPage</value>
				<value>productDetail</value>
				<value>category</value>
				<value>navigation</value>	
				<value>largeView</value>	
				<value>quickView</value>
			</list>
		</property>
	</bean>

	<alias name="acceleratorProductGalleryImagesPopulator" alias="productGalleryImagesPopulator" />
	<bean id="acceleratorProductGalleryImagesPopulator" parent="defaultProductGalleryImagesPopulator">
		<property name="imageFormats">
			<list>
				<value>thumbnail</value>
				<value>miniCart</value>
				<value>productDetail</value>
				<value>largeView</value>	
				<value>quickView</value>			
			</list>
		</property>
	</bean>
	
	<alias name="oshWishlistFacade" alias="oshWishlistFacade"/>
	<bean id="oshWishlistFacade" class="com.hybris.osh.facades.wishlist.impl.DefaultOshWishListFacade" scope="tenant">
	<property name="userService" ref="userService"/>
	<property name="productService" ref="productService"/>
	<property name="wishlistService" ref="wishlistService"/>	
	<property name="modelService" ref="modelService"/>	
	</bean>
	
	
	
    <!-- Osh Payment Update Service -->
	<alias alias="oshPaymentFacade" name="oshPaymentFacade"/>
	<bean id="oshPaymentFacade"	class="com.hybris.osh.facades.payment.impl.DefaultOshPaymentFacade" scope="tenant">
	<property name="enumerationService" ref="enumerationService" />	
	</bean>
	<!-- Osh Payment Update Service Ends -->
	
	<bean id="customerEmailContext" class="com.hybris.osh.facades.process.email.context.CustomerEmailContext" parent="abstractEmailContext"
		scope="prototype">
		<property name="customerConverter" ref="customerConverter" />
	</bean>

	<bean id="forgottenPasswordEmailContext" class="com.hybris.osh.facades.process.email.context.ForgottenPasswordEmailContext"
		parent="customerEmailContext" scope="prototype">
		<property name="customerConverter" ref="customerConverter" />
	</bean>

	<bean id="orderNotificationEmailContext" class="com.hybris.osh.facades.process.email.context.OrderNotificationEmailContext"
		parent="abstractEmailContext" scope="prototype">
		<property name="orderConverter" ref="orderConverter" />
		<property name="enumerationService" ref="enumerationService" />	
	</bean>
	
	<bean id="orderCancelNotificationEmailContext" class="com.hybris.osh.facades.process.email.context.OrderCancelNotificationEmailContext"
		parent="abstractEmailContext" scope="prototype">
		<property name="orderConverter" ref="orderConverter" />
	</bean>
	<bean id="OrderShippedEmailContext" class="com.hybris.osh.facades.process.email.context.OrderShippedEmailContext"
		parent="abstractEmailContext" scope="prototype">
		<property name="orderConverter" ref="orderConverter" />
		<property name="addressConverter" ref="addressConverter"/>
		<property name="enumerationService" ref="enumerationService" />	
	</bean>
	
	<bean id="ReadyForPickUpEmailContext" class="com.hybris.osh.facades.process.email.context.ReadyForPickUpEmailContext"
		parent="abstractEmailContext" scope="prototype">
		<property name="orderConverter" ref="orderConverter" />
		<property name="enumerationService" ref="enumerationService" />	
	</bean>
	
	<bean id="OrderConfirmationEmailContext" class="com.hybris.osh.facades.process.email.context.OrderConfirmationEmailContext"
		parent="abstractEmailContext" scope="prototype">
		<property name="orderConverter" ref="orderConverter" />
		<property name="enumerationService" ref="enumerationService" />	
	</bean>
	
	
	
	<bean id="OrderRMAMailContext" class="com.hybris.osh.facades.process.email.context.OrderRMAMailContext"
		parent="abstractEmailContext" scope="prototype">
		<property name="orderConverter" ref="orderConverter" />
		<property name="enumerationService" ref="enumerationService" />	
	</bean>
	
	
	<bean id="OrderReturnEmailContext" class="com.hybris.osh.facades.process.email.context.OrderReturnEmailContext"
		parent="abstractEmailContext" scope="prototype">
		<property name="orderConverter" ref="orderConverter" />
		<property name="enumerationService" ref="enumerationService" />	
	</bean>
	
	<bean id="SendEmailToFriendContext" class="com.hybris.osh.facades.process.email.context.SendEmailToFriendContext"
		parent="abstractEmailContext" scope="prototype">
		<property name="enumerationService" ref="enumerationService" />	
	</bean>
	
	<bean id="PaymentFailedEmailContext" class="com.hybris.osh.facades.process.email.context.PaymentFailedEmailContext"
		parent="abstractEmailContext" scope="prototype">
		<property name="enumerationService" ref="enumerationService" />	
	</bean>
	
	<alias name="oshCartFacade" alias="cartFacade"/>
	<bean id="oshCartFacade" class="com.hybris.osh.facades.cart.impl.DefaultOshCartFacade" parent="defaultCartFacade" scope="tenant">
		<property name="userService" ref="userService" />
		<property name="productService" ref="productService" />
		<property name="productFacade" ref="productFacade" />
		<property name="oshCommerceCartService" ref="oshCommerceCartService" />
	</bean>

	<alias name="defaultCheckoutFlowFacade" alias="checkoutFlowFacade" />
	<bean id="defaultCheckoutFlowFacade" class="com.hybris.osh.facades.flow.impl.DefaultCheckoutFlowFacade" parent="defaultAcceleratorCheckoutFacade"
		scope="tenant">
		<property name="checkoutFlowStrategy" ref="checkoutFlowStrategy" />
		<property name="checkoutPciStrategy" ref="checkoutPciStrategy" />
	</bean>

	<!-- The SessionOverrideCheckoutFlowFacade allows the CheckoutFlow and the SubscriptionPciOption to be overridden in the session. 
		This is typically done for demonstration purposes and you may not need this behaviour in your environment, in which case the defaultCheckoutFlowFacade 
		should be sufficient. -->
	<alias name="sessionOverrideCheckoutFlowFacade" alias="checkoutFlowFacade" />
	<bean id="sessionOverrideCheckoutFlowFacade" class="com.hybris.osh.facades.flow.impl.SessionOverrideCheckoutFlowFacade"
		parent="defaultCheckoutFlowFacade" scope="tenant">
		<property name="sessionService" ref="sessionService" />
	</bean>

	<alias name="defaultDeviceDetectionFacade" alias="deviceDetectionFacade" />
	<bean id="defaultDeviceDetectionFacade" class="com.hybris.osh.facades.device.impl.DefaultDeviceDetectionFacade" scope="tenant">
		<property name="sessionService" ref="sessionService" />
		<property name="uiExperienceService" ref="uiExperienceService" />
		<property name="requestDeviceDataConverter" ref="wurflRequestDeviceDataConverter" />
		<property name="deviceDataUiExperienceLevelConverter" ref="deviceDataUiExperienceLevelConverter" />
	</bean>
	<alias name="oshProductConverter" alias="productConverter"/>
	<bean id="oshProductConverter" scope="tenant" parent="defaultProductConverter">
		<lookup-method bean="oshProductData" name="createTarget"/>
		<property name="populators">
			<list merge="true">
				<ref bean="oshProductPopulator"/>
				<ref bean="defaultProductPromotionsPopulator"/>
			</list>
		</property>
	</bean>
	
	<bean id="oshProductPopulator" class="com.hybris.osh.facades.converters.populator.OshProductPopulator" scope="tenant" />

	<bean id="oshProductData" class="com.hybris.osh.facades.product.data.OshProductData" scope="prototype"/>
	
	<bean id="wurflManager" class="net.sourceforge.wurfl.spring.SpringWurflManager" scope="tenant">
		<property name="wurfl" value="classpath:wurfl/wurfl-2.3.1.zip" />
		<!--<property name="wurflPatch" value="classpath:wurfl/web_browsers_patch.xml"/> -->
	</bean>

	<bean id="wurflRequestDeviceDataConverter" class="com.hybris.osh.facades.device.converter.WurflRequestDeviceDataConverter"
		scope="tenant">
		<property name="wurflManager" ref="wurflManager" />
	</bean>

	<bean id="deviceDataUiExperienceLevelConverter" class="com.hybris.osh.facades.device.converter.DeviceDataUiExperienceLevelConverter"
		scope="tenant" />

	<alias name="defaultStoreFinderFacade" alias="storeFinderFacade" />
	<bean id="defaultStoreFinderFacade" class="de.hybris.platform.acceleratorfacades.storefinder.impl.DefaultStoreFinderFacade"
		scope="tenant">
		<property name="baseStoreService" ref="baseStoreService" />
		<property name="storeFinderService" ref="storeFinderService" />
		<property name="searchPagePointOfServiceDistanceConverter" ref="searchPagePointOfServiceDistanceConverter" />
		<property name="pointOfServiceConverter" ref="pointOfServiceConverter" />
		<property name="pointOfServiceDistanceConverter" ref="pointOfServiceDistanceConverter" />
	</bean>

	<bean id="searchPagePointOfServiceDistanceConverter" class="com.hybris.osh.facades.storefinder.converters.SearchPagePointOfServiceDistanceConverter"
		scope="tenant">
		<property name="pointOfServiceDistanceConverter" ref="pointOfServiceDistanceConverter" />
	</bean>

	<bean id="pointOfServiceDistanceConverter" class="de.hybris.platform.acceleratorfacades.storefinder.converters.PointOfServiceDistanceConverter"
		scope="tenant">
		<property name="distanceHelper" ref="distanceHelper" />
		<property name="pointOfServiceConverter" ref="pointOfServiceConverter" />
	</bean>

	<!-- Replace the orderEntryConverter to use a custom orderEntryProductConverter -->
	<alias name="oshOrderEntryConverter" alias="orderEntryConverter" />
	<bean id="oshOrderEntryConverter" parent="defaultOrderEntryConverter">
		<property name="productConverter" ref="orderEntryProductConverter" />
		<lookup-method bean="oshOrderEntryData" name="createTarget"/>
		<property name="populators">
			<list merge="true">
				<ref bean="oshOrderEntryDataPopulator"/>
			</list>
		</property>
	</bean>
	
	<bean id="oshOrderEntryDataPopulator" class="com.hybris.osh.facades.converters.populator.OshOrderEntryPopulator" scope="tenant"/>
	<bean id="oshOrderEntryData" class="com.hybris.osh.facades.order.data.OshOrderEntryData" scope="prototype" /> 

	<alias name="oshOrderConverter" alias="orderConverter" />
	<bean id="oshOrderConverter" parent="defaultOrderConverter">
	<lookup-method bean="oshOrderData" name="createTarget"/>
		<property name="populators">
			<list merge="true">
				<ref bean="oshOrderDataPopulator"/>
			</list>
		</property>
	</bean>

	<bean id="oshOrderData" class="com.hybris.osh.facades.order.data.OshOrderData" scope="prototype"></bean>
	<bean id="oshOrderDataPopulator" class="com.hybris.osh.facades.converters.populator.OshOrderDataPopulator">
	<property name="addressConverter" ref="addressConverter" />
	</bean>
	
	<alias name="oshCartConverter" alias="cartConverter" />
	<bean id="oshCartConverter" parent="defaultCartConverter">
	<lookup-method bean="oshCartData" name="createTarget"/>
		<property name="populators">
			<list merge="true">
				<ref bean="oshCartDataPopulator"/>
			</list>
		</property>
	</bean>

	<bean id="oshCartData" class="com.hybris.osh.facades.order.data.OshCartData" scope="prototype"></bean>
	<bean id="oshCartDataPopulator" class="com.hybris.osh.facades.converters.populator.OshCartDataPopulator"></bean>
	

	<!-- Create a custom ProductConverter that always populates the stock & categories. -->
	<alias name="oshOrderEntryProductConverter" alias="orderEntryProductConverter" />
	<bean id="oshOrderEntryProductConverter" parent="oshProductConverter">
		<property name="populators">
			<list merge="true">
				<ref bean="productStockPopulator" />
				<ref bean="productCategoriesPopulator" />
			</list>
		</property>
	</bean>
	
	<!-- Extending the OOTB defaultProductFacade -->
	<alias name="oshProductFacade" alias="oshproductFacade"/>
	<bean id="oshProductFacade" class="com.hybris.osh.facades.product.impl.OshProductFacade"  parent ="defaultProductFacade" scope="tenant">
		<property name="oshProductReferenceConverter" ref="oshProductReferenceConverter"/>
		<property name="stockService" ref="stockService" />
		<property name="warehouseService" ref="warehouseService" />
		<property name="oshStoreFlagService" ref="oshStoreFlagService" />
	</bean>
	
	<!-- new converter to associate the priority attribute of product references -->
	<alias name="oshProductReferenceConverter" alias="oshProductReferenceConverter" />
	<bean id="oshProductReferenceConverter" class="com.hybris.osh.facades.product.converters.OshProductReferenceConverter" scope="tenant">
		<lookup-method bean="oshProductReferenceData" name="createTarget"/>
	</bean>
	
	<alias name="oshProductReferenceData" alias="oshProductReferenceData" />
	<bean id="oshProductReferenceData" class="com.hybris.osh.facades.product.data.OshProductReferenceData" scope="prototype"/>

<alias name="oshAddressReversePopulator" alias="addressReversePopulator" />
	<bean id="oshAddressReversePopulator" class="com.hybris.osh.facades.converters.populator.OshAddressReversePopulator" parent="defaultAddressReversePopulator" scope="tenant"/>
	
	<alias name="defaultAddressConverter" alias="addressConverter" />
	<bean id="defaultAddressConverter" class="de.hybris.platform.commercefacades.user.converters.AddressConverter" scope="tenant" >
			<lookup-method bean="oshAddressData" name="createTarget"/>
			<property name="populators">
				<ref bean="oshAddressPopulator"/>
			</property>
	</bean>
	<bean id="oshAddressPopulator" class="com.hybris.osh.facades.converters.populator.OshAddresssPopulator" scope="tenant" />
	<bean id="oshAddressData" class="com.hybris.osh.facades.user.data.OshAddressData" scope="prototype"/>
		
	<alias name="defaultOshCheckoutFacade" alias="checkoutFacade"/>
	<bean id="defaultOshCheckoutFacade" class="com.hybris.osh.facades.checkout.impl.DefaultOshCheckoutFacade" parent="defaultCheckoutFacade" scope="tenant">
	<property name="oshCommerceCheckoutService" ref="oshCommerceCheckoutService"/>	
	<property name="cardTypeConverter" ref="cardTypeConverter"/>
	</bean>
	
	
	<alias name="defaultOshSearchResultProductConverter" alias="commerceSearchResultProductConverter" />
	<bean id="defaultOshSearchResultProductConverter" class="com.hybris.osh.facades.converters.OshSearchResultProductConverter" scope="tenant">
		<property name="commonI18NService" ref="commonI18NService"/>
		<property name="imageFormatMapping" ref="imageFormatMapping"/>
		<property name="priceDataFactory" ref="priceDataFactory" />
		<property name="productDataUrlResolver" ref="productDataUrlResolver"/>
		<property name="productFeatureListPopulator" ref="productFeatureListPopulator"/>
		<property name="productService" ref="productService"/>
		<property name="productStockPopulator" ref="productStockPopulator"/>
	</bean>
			
	<bean id="guestCustomerFacade" class="com.hybris.osh.facades.customer.impl.DefaultGuestCustomerFacade" scope="tenant"></bean>
	
	<alias name="defaultOshCustomerFacade" alias="customerFacade" />
	<bean id="defaultOshCustomerFacade" class="com.hybris.osh.facades.customer.impl.DefaultOshCustomerFacade" parent="defaultCustomerFacade" scope="tenant" >
	<property name="oshCustomerAccountService" ref="oshCustomerAccountService"/>
	</bean>
		
	<alias name="defaultOshPointOfServiceConverter" alias="pointOfServiceConverter" />
	<bean id="defaultOshPointOfServiceConverter" class="com.hybris.osh.facades.storelocator.converters.OshPointOfServiceConverter" scope="tenant">
		<property name="addressConverter" ref="addressConverter" />
		<property name="imageConverter" ref="imageConverter" />
		<property name="imageFormatMapping" ref="imageFormatMapping"/>
		<property name="mediaService" ref="mediaService" />
		<property name="mediaContainerService" ref="mediaContainerService" />
		<property name="imageFormats">
			<list>
				<value>store</value>
				<value>cartIcon</value>
			</list>
		</property>
		<property name="openingScheduleConverter" ref="openingScheduleConverter"/>
	</bean>	
	
	<alias name="defaultOshVariantOptionDataConverter" alias="variantOptionDataConverter"/>
	<bean id="defaultOshVariantOptionDataConverter" class="com.hybris.osh.facades.converters.OshVariantOptionDataConverter" parent="defaultVariantOptionDataConverter" scope="tenant">
	</bean>
	
	<alias name="defaultOshCustomerConverter" alias="customerConverter" />
	<bean id="defaultOshCustomerConverter" class="de.hybris.platform.commercefacades.user.converters.CustomerConverter" parent="defaultCustomerConverter"  scope="tenant">
		<lookup-method bean="oshCustomerData" name="createTarget"/>
			<property name="populators">
				<ref bean="oshCustomerPopulator"/>
			</property>
	</bean>
	
    <bean id="oshCustomerData" class="com.hybris.osh.facades.customer.data.OshCustomerData" scope="prototype"/>
	<bean id="oshCustomerPopulator" class="com.hybris.osh.facades.converters.populator.OshCustomerPopulator" scope="tenant" />
	
	<bean id="inventoryValidation" class="com.hybris.osh.facades.inventoryvalidation.impl.DefaultInventoryValidation" scope="tenant">
	  <property name="stockLevelStatusStrategy" ref="stockLevelStatusStrategy"/>
	  </bean>
	
	
	
	<alias name="defaultOshProductStockPopulator" alias="productStockPopulator" />
	<bean id="defaultOshProductStockPopulator" parent="baseProductPopulator" class="com.hybris.osh.facades.converters.populator.OshProductStockPopulator">
		<property name="stockService" ref="stockService"/>
		<property name="warehouseService" ref="warehouseService"/>
		<property name="stockLevelStatusStrategy" ref="stockLevelStatusStrategy"/>
	</bean>
	<bean id="cheetahMailSubscriberFacade" class="com.hybris.osh.facades.cheetah.impl.DefaultCheetahMailSubscriberFacade" scope="tenant"></bean>	
	<bean id="oshTaxFacade" class="com.hybris.osh.facades.tax.impl.OshTaxFacadeImpl" scope="tenant">
	<property name="keyGenerator" ref="orderCodeGenerator"/>
	</bean>	
	
	<bean id="oshStoreNameFacade" class="com.hybris.osh.facades.storename.impl.DefaultOshStoreNameFacade" scope="tenant">
	<property name="contactUsEmailService" ref="contactUsEmailService"/>
	<property name="pointOfServiceConverter" ref="pointOfServiceConverter"/>
	</bean>
	
	<alias name="defaultOshStoreFinderFacade" alias="oshStoreFinderFacade" />
	<bean id="defaultOshStoreFinderFacade" class="com.hybris.osh.facades.storelocator.converters.DefaultOshStoreFinderFacade" scope="tenant">
		<property name="baseStoreService" ref="baseStoreService" />
		<property name="storeFinderService" ref="storeFinderService" />
		<property name="searchPagePointOfServiceDistanceConverter" ref="searchPagePointOfServiceDistanceConverter" />
		<property name="pointOfServiceConverter" ref="pointOfServiceConverter" />
		<property name="pointOfServiceDistanceConverter" ref="pointOfServiceDistanceConverter" />
	</bean>
	
</beans>








